<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>13支-比牌環節</title>
    <style>
        body {
            background-image: url("imgs/牌桌.png");
            background-repeat: no-repeat;
            background-size: cover;
        }
        #compare {
            position: absolute;
            width: 15%;
            top: 38%;
            left: 42.5%;
        }
        #ohmygoddesu {
            display:none;
            position: absolute;
            background-color: lightgray;
            top: 23.5%;
            left: 30%;
        }
        p{
            height:80px;
        }
    </style>
</head>
<body>
    <img onclick="COMPARE()" id="compare" />
    <div style="width:600px;height:425px;border:3px #000000 dashed;" id="ohmygoddesu">
        <p id="comA"></p>
        <p id="comB"></p>
        <p id="comC"></p>
        <p id="comD"></p>
        <p >(點此圖繼續遊戲)</p>
    </div>
    <script>
        let data = {};
        let queryString = window.location.search;// 獲得網址字串
        let A1 = new Array(3), A2 = new Array(5), A3 = new Array(5);//玩家1
        let p2 = new Array(16);
        let B1 = new Array(3), B2 = new Array(5), B3 = new Array(5);//玩家2
        let p3 = new Array(16);
        let C1 = new Array(3), C2 = new Array(5), C3 = new Array(5);//玩家3
        let p4 = new Array(16);
        let D1 = new Array(3), D2 = new Array(5), D3 = new Array(5);//玩家4
        let now_for_compare = 1;
        let sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        let now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        let test1 = 0, test2 = 0, test3 = 0, test4 = 0, index = 0, gold = 0;
        let trickA = [0, 0, 0], trickB = [0, 0, 0], trickC = [0, 0, 0], trickD = [0, 0, 0];
        let wordsA = "", wordsB = "", wordsC = "", wordsD = "";
        let totalA = 0, totalB = 0, totalC = 0, totalD = 0;
        let homerunA = 0, homerunB = 0, homerunC = 0, homerunD = 0;
        function getdata() {
            queryString = queryString.substring(1);// 去除問號
            queryString.split("&").forEach(function (keyValue) {// 把資料放到data
                var parts = keyValue.split("=");
                data[decodeURIComponent(parts[0])] = decodeURIComponent(parts[1]);
            });
            //key1:頭墩//key2:二道//key3:尾墩//key4:玩家2//key5:玩家3//key6:玩家4//key7:當前流程
            A1 = data.key1.split(',');
            for (let i = 0; i <= 2; i++) { A1[i] = parseInt(A1[i]) }
            A2 = data.key2.split(',');
            for (let i = 0; i <= 4; i++) { A2[i] = parseInt(A2[i]) }
            A3 = data.key3.split(',');
            for (let i = 0; i <= 4; i++) { A3[i] = parseInt(A3[i]) }
            p2 = data.key4.split(',');
            p3 = data.key5.split(',');
            p4 = data.key6.split(',');
            document.getElementById("compare").src = "imgs/比較" + now_for_compare + ".png";
            for (let i = 0; i <= 15; i++) { p2[i] = parseInt(p2[i]) }
            for (let i = 0; i <= 15; i++) { p3[i] = parseInt(p3[i]) }
            for (let i = 0; i <= 15; i++) { p4[i] = parseInt(p4[i]) }
            console.log("AI前:")
            console.log(p2); console.log(p3); console.log(p4);
            AI(p2, B1, B2, B3, 1, trickB);
            AI(p3, C1, C2, C3, 2, trickC);
            AI(p4, D1, D2, D3, 3, trickD);
            console.log("AI後:")
            console.log(B1, B2, B3); console.log(C1, C2, C3); console.log(D1, D2, D3);
            console.log(trickB, trickC, trickD);
        }
        function head() {
            document.getElementById("compare").style.display = "none";
            document.getElementById("comA").innerHTML = "";document.getElementById("comB").innerHTML = "";
            document.getElementById("comC").innerHTML = ""; document.getElementById("comD").innerHTML = "";
            test1 = 0; test2 = 0; test3 = 0; test4 = 0;
            wordsA = ""; wordsB = ""; wordsC = ""; wordsD = "";
            //A            
            wordsA = "玩家A(你):<br>";
            if (trickA[0] > trickB[0]) {
                wordsA += "大於玩家B(+1) ";
                test1 += 1;
                homerunA += 1;
            }
            else if (trickA[0] == trickB[0]) {
                wordsA += "等於玩家B(+0) ";
            }
            else {
                wordsA += "小於玩家B(-1) ";
                test1 -= 1;
            }
            if (trickA[0] > trickC[0]) {
                wordsA += "大於玩家C(+1) ";
                test1 += 1;
                homerunA += 1;
            }
            else if (trickA[0] == trickC[0]) {
                wordsA += "等於玩家C(+0) ";
            }
            else {
                wordsA += "小於玩家C(-1) ";
                test1 -= 1;
            }
            if (trickA[0] > trickD[0]) {
                wordsA += "大於玩家D(+1) ";
                test1 += 1;
                homerunA += 1;
            }
            else if (trickA[0] == trickD[0]) {
                wordsA += "等於玩家D(+0) ";
            }
            else {
                wordsA += "小於玩家D(-1) ";
                test1 -= 1;
            }
            wordsA += "<br>";
            if (trickA[0] == 4) {
                wordsA += "玩家A彩金三條(+6)";
                test1 += 6;
            }
            if (trickA[0] == 3) {
                wordsA += "玩家A衝三(+3)";
                test1 += 3;
            }
            if (trickB[0] == 4) {
                wordsA += "玩家B彩金三條(-2)";
                test1 -= 2;
            }
            if (trickB[0] == 3) {
                wordsA += "玩家B衝三(-1)";
                test1 -= 1;
            }
            if (trickC[0] == 4) {
                wordsA += "玩家C彩金三條(-2)";
                test1 -= 2;
            }
            if (trickC[0] == 3) {
                wordsA += "玩家C衝三(-1)";
                test1 -= 1;
            }
            if (trickD[0] == 4) {
                wordsA += "玩家D彩金三條(-2)";
                test1 -= 2;
            }
            if (trickD[0] == 3) {
                wordsA += "玩家D衝三(-1)";
                test1 -= 1;
            }
            //B
            wordsB = "";
            wordsB = "玩家B:<br>";
            if (trickB[0] > trickA[0]) {
                wordsB += "大於玩家A(+1) ";
                test2 += 1;
                homerunB += 1;
            }
            else if (trickB[0] == trickA[0]) {
                wordsB += "等於玩家A(+0) ";
            }
            else {
                wordsB += "小於玩家A(-1) ";
                test2 -= 1;
            }
            if (trickB[0] > trickC[0]) {
                wordsB += "大於玩家C(+1) ";
                homerunB += 1;
                test2 += 1;
            }
            else if (trickB[0] == trickC[0]) {
                wordsB += "等於玩家C(+0) ";
            }
            else {
                wordsB += "小於玩家C(-1) ";
                test2 -= 1;
            }
            if (trickB[0] > trickD[0]) {
                wordsB += "大於玩家D(+1) ";
                homerunB += 1;
                test2 += 1;
            }
            else if (trickB[0] == trickD[0]) {
                wordsB += "等於玩家D(+0) ";
            }
            else {
                wordsB += "小於玩家D(-1) ";
                test2 -= 1;
            }
            wordsB += "<br>";
            if (trickA[0] == 4) {
                wordsB += "玩家A彩金三條(-2)";
                test2 -= 2;
            }
            if (trickA[0] == 3) {
                wordsB += "玩家A衝三(-1)";
                test2 -= 1;
            }
            if (trickB[0] == 4) {
                wordsB += "玩家B彩金三條(+6)";
                test2 += 6;
            }
            if (trickB[0] == 3) {
                wordsB += "玩家B衝三(+3)";
                test2 += 3;
            }
            if (trickC[0] == 4) {
                wordsB += "玩家C彩金三條(-2)";
                test2 -= 2;
            }
            if (trickC[0] == 3) {
                wordsB += "玩家C衝三(-1)";
                test2 -= 1;
            }
            if (trickD[0] == 4) {
                wordsB += "玩家D彩金三條(-2)";
                test2 -= 2;
            }
            if (trickD[0] == 3) {
                wordsB += "玩家D衝三(-1)";
                test2 -= 1;
            }
            //C
            wordsC = "";
            wordsC = "玩家C:<br>";
            if (trickC[0] > trickA[0]) {
                wordsC += "大於玩家A(+1) ";
                test3 += 1;
                homerunC += 1;
            }
            else if (trickC[0] == trickA[0]) {
                wordsC += "等於玩家A(+0) ";
            }
            else {
                wordsC += "小於玩家A(-1) ";
                test3 -= 1;
            }
            if (trickC[0] > trickB[0]) {
                wordsC += "大於玩家B(+1) ";
                test3 += 1;
                homerunC += 1;
            }
            else if (trickB[0] == trickC[0]) {
                wordsC += "等於玩家B(+0) ";
            }
            else {
                wordsC += "小於玩家B(-1) ";
                test3 -= 1;
            }
            if (trickC[0] > trickD[0]) {
                wordsC += "大於玩家D(+1) ";
                homerunC += 1;
                test3 += 1;
            }
            else if (trickC[0] == trickD[0]) {
                wordsC += "等於玩家D(+0) ";
            }
            else {
                wordsC += "小於玩家D(-1) ";
                test3 -= 1;
            }
            wordsC += "<br>";
            if (trickA[0] == 4) {
                wordsC += "玩家A彩金三條(-2)";
                test3 -= 2;
            }
            if (trickA[0] == 3) {
                wordsC += "玩家A衝三(-1)";
                test3 -= 1;
            }
            if (trickB[0] == 4) {
                wordsC += "玩家B彩金三條(-2)";
                test3 -= 2;
            }
            if (trickB[0] == 3) {
                wordsC += "玩家B衝三(-1)";
                test3 -= 1;
            }
            if (trickC[0] == 4) {
                wordsC += "玩家C彩金三條(+6)";
                test3 += 6;
            }
            if (trickC[0] == 3) {
                wordsC += "玩家C衝三(+3)";
                test3 += 3;
            }
            if (trickD[0] == 4) {
                wordsC += "玩家D彩金三條(-2)";
                test3 -= 2;
            }
            if (trickD[0] == 3) {
                wordsC += "玩家D衝三(-1)";
                test3 -= 1;
            }
            //D
            wordsD = "";
            wordsD = "玩家D:<br>";
            if (trickD[0] > trickA[0]) {
                wordsD += "大於玩家A(+1) ";
                test4 += 1;
                homerunD += 1;
            }
            else if (trickD[0] == trickA[0]) {
                wordsD += "等於玩家A(+0) ";
            }
            else {
                wordsD += "小於玩家A(-1) ";
                test4 -= 1;
            }
            if (trickD[0] > trickB[0]) {
                wordsD += "大於玩家B(+1) ";
                homerunD += 1;
                test4 += 1;
            }
            else if (trickB[0] == trickD[0]) {
                wordsD += "等於玩家B(+0) ";
            }
            else {
                wordsD += "小於玩家B(-1) ";
                test4 -= 1;
            }
            if (trickD[0] > trickC[0]) {
                wordsD += "大於玩家C(+1) ";
                homerunD += 1;
                test4 += 1;
            }
            else if (trickC[0] == trickD[0]) {
                wordsD += "等於玩家C(+0) ";
            }
            else {
                wordsD += "小於玩家C(-1) ";
                test4 -= 1;
            }
            wordsD += "<br>";
            if (trickA[0] == 4) {
                wordsD += "玩家A彩金三條(-2)";
                test4 -= 2;
            }
            if (trickA[0] == 3) {
                wordsD += "玩家A衝三(-1)";
                test4 -= 1;
            }
            if (trickB[0] == 4) {
                wordsD += "玩家B彩金三條(-2)";
                test4 -= 2;
            }
            if (trickB[0] == 3) {
                wordsD += "玩家B衝三(-1)";
                test4 -= 1;
            }
            if (trickC[0] == 4) {
                wordsD += "玩家C彩金三條(-2)";
                test4 -= 2;
            }
            if (trickC[0] == 3) {
                wordsD += "玩家C衝三(-1)";
                test4 -= 1;
            }
            if (trickD[0] == 4) {
                wordsD += "玩家D彩金三條(+6)";
                test4 += 6;
            }
            if (trickD[0] == 3) {
                wordsD += "玩家D衝三(+3)";
                test4 += 3;
            }
            totalA += test1; totalB += test2; totalC += test3; totalD += test4;
            wordsA += "<br>玩家A頭墩這次獲得" + test1 + "墩牌(共" + totalA + "墩)";
            wordsB += "<br>玩家B頭墩這次獲得" + test2 + "墩牌(共" + totalB + "墩)";
            wordsC += "<br>玩家C頭墩這次獲得" + test3 + "墩牌(共" + totalC + "墩)";
            wordsD += "<br>玩家D頭墩這次獲得" + test4 + "墩牌(共" + totalD + "墩)";
            document.getElementById("comA").innerHTML = wordsA;
            document.getElementById("comB").innerHTML = wordsB;
            document.getElementById("comC").innerHTML = wordsC;
            document.getElementById("comD").innerHTML = wordsD;
            document.getElementById("ohmygoddesu").style.display = "initial";
            document.getElementById("ohmygoddesu").addEventListener("click", function () {
                if (now_for_compare == 1) {
                    now_for_compare = 2;
                    document.getElementById("compare").src = "imgs/比較" + now_for_compare + ".png";
                    document.getElementById("compare").style.display = "initial";
                    document.getElementById("ohmygoddesu").style.display = "none";
                }               
            })
        }
        function mid() {
            document.getElementById("compare").style.display = "none";
            document.getElementById("comA").innerHTML = ""; document.getElementById("comB").innerHTML = "";
            document.getElementById("comC").innerHTML = ""; document.getElementById("comD").innerHTML = "";
            test1 = 0; test2 = 0; test3 = 0; test4 = 0;
            wordsA = ""; wordsB = ""; wordsC = ""; wordsD = "";
            //A            
            wordsA = "玩家A(你):<br>";
            if (trickA[1] > trickB[1]) {
                wordsA += "大於玩家B(+1) ";
                test1 += 1;
                homerunA += 1;
            }
            else if (trickA[1] == trickB[1]) {
                wordsA += "等於玩家B(+0) ";
            }
            else {
                wordsA += "小於玩家B(-1) ";
                test1 -= 1;
            }
            if (trickA[1] > trickC[1]) {
                wordsA += "大於玩家C(+1) ";
                test1 += 1;
                homerunA += 1;
            }
            else if (trickA[1] == trickC[1]) {
                wordsA += "等於玩家C(+0) ";
            }
            else {
                wordsA += "小於玩家C(-1) ";
                test1 -= 1;
            }
            if (trickA[1] > trickD[1]) {
                wordsA += "大於玩家D(+1) ";
                test1 += 1;
                homerunA += 1;
            }
            else if (trickA[1] == trickD[1]) {
                wordsA += "等於玩家D(+0) ";
            }
            else {
                wordsA += "小於玩家D(-1) ";
                test1 -= 1;
            }//五枚13>同花順12>彩金鐵支11>鐵支10>彩金葫蘆9>葫蘆8>對子同花7>同花6>順子5>彩金三條4>三條3>兩對2<一對1>烏龍0
            wordsA += "<br>";
            if (trickA[1] == 4) { wordsA += "玩家A彩金三條(+3)"; test1 += 3; }
            else if (trickA[1] == 9) { wordsA += "玩家A彩金葫蘆(+6)"; test1 += 6; }
            else if (trickA[1] == 10) { wordsA += "玩家A鐵支(+6)"; test1 += 6; }
            else if (trickA[1] == 12) { wordsA += "玩家A同花順(+6)"; test1 += 6; }
            else if (trickA[1] == 11) { wordsA += "玩家A彩金鐵支(+15)"; test1 += 15; }
            else if (trickA[1] == 13) { wordsA += "玩家A五枚(+30)"; test1 += 30; }
            if (trickB[1] == 4) { wordsA += "玩家B彩金三條(-1)"; test1 -= 1; }
            else if (trickB[1] == 9) { wordsA += "玩家B彩金葫蘆(-2)"; test1 -= 2; }
            else if (trickB[1] == 10) { wordsA += "玩家B鐵支(-2)"; test1 -= 2; }
            else if (trickB[1] == 12) { wordsA += "玩家B同花順(-2)"; test1 -= 2; }
            else if (trickB[1] == 11) { wordsA += "玩家B彩金鐵支(-5)"; test1 -= 5; }
            else if (trickB[1] == 13) { wordsA += "玩家B五枚(-10)"; test1 -= 10; }
            if (trickC[1] == 4) { wordsA += "玩家C彩金三條(-1)"; test1 -= 1; }
            else if (trickC[1] == 9) { wordsA += "玩家C彩金葫蘆(-2)"; test1 -= 2; }
            else if (trickC[1] == 10) { wordsA += "玩家C鐵支(-2)"; test1 -= 2; }
            else if (trickC[1] == 12) { wordsA += "玩家C同花順(-2)"; test1 -= 2; }
            else if (trickC[1] == 11) { wordsA += "玩家C彩金鐵支(-5)"; test1 -= 5; }
            else if (trickC[1] == 13) { wordsA += "玩家C五枚(-10)"; test1 -= 10; }
            if (trickD[1] == 4) { wordsA += "玩家D彩金三條(-1)"; test1 -= 1; }
            else if (trickD[1] == 9) { wordsA += "玩家D彩金葫蘆(-2)"; test1 -= 2; }
            else if (trickD[1] == 10) { wordsA += "玩家D鐵支(-2)"; test1 -= 2; }
            else if (trickD[1] == 12) { wordsA += "玩家D同花順(-2)"; test1 -= 2; }
            else if (trickD[1] == 11) { wordsA += "玩家D彩金鐵支(-5)"; test1 -= 5; }
            else if (trickD[1] == 13) { wordsA += "玩家D五枚(-10)"; test1 -= 10; }
            //B
            wordsB = "";
            wordsB = "玩家B:<br>";
            if (trickB[1] > trickA[1]) {
                wordsB += "大於玩家A(+1) ";
                homerunB += 1;
                test2 += 1;
            }
            else if (trickB[1] == trickA[1]) {
                wordsB += "等於玩家A(+0) ";
            }
            else {
                wordsB += "小於玩家A(-1) ";
                test2 -= 1;
            }
            if (trickB[1] > trickC[1]) {
                wordsB += "大於玩家C(+1) ";
                homerunB += 1;
                test2 += 1;
            }
            else if (trickB[1] == trickC[1]) {
                wordsB += "等於玩家C(+0) ";
            }
            else {
                wordsB += "小於玩家C(-1) ";
                test2 -= 1;
            }
            if (trickB[1] > trickD[1]) {
                wordsB += "大於玩家D(+1) ";
                homerunB += 1;
                test2 += 1;
            }
            else if (trickB[1] == trickD[1]) {
                wordsB += "等於玩家D(+0) ";
            }
            else {
                wordsB += "小於玩家D(-1) ";
                test2 -= 1;
            }
            wordsB += "<br>";
            if (trickA[1] == 4) { wordsB += "玩家A彩金三條(-1)"; test2 -= 1; }
            else if (trickA[1] == 9) { wordsB += "玩家A彩金葫蘆(-2)"; test2 -= 2; }
            else if (trickA[1] == 10) { wordsB += "玩家A鐵支(-2)"; test2 -= 2; }
            else if (trickA[1] == 12) { wordsB += "玩家A同花順(-2)"; test2 -= 2; }
            else if (trickA[1] == 11) { wordsB += "玩家A彩金鐵支(-5)"; test2 -= 5; }
            else if (trickA[1] == 13) { wordsB += "玩家A五枚(-10)"; test2 -= 10; }
            if (trickB[1] == 4) { wordsB += "玩家B彩金三條(+3)"; test2 += 3; }
            else if (trickB[1] == 9) { wordsB += "玩家B彩金葫蘆(+6)"; test2 += 6; }
            else if (trickB[1] == 10) { wordsB += "玩家B鐵支(+6)"; test2 += 6; }
            else if (trickB[1] == 12) { wordsB += "玩家B同花順(+6)"; test2 += 6; }
            else if (trickB[1] == 11) { wordsB += "玩家B彩金鐵支(+15)"; test2 += 15; }
            else if (trickB[1] == 13) { wordsB += "玩家B五枚(+30)"; test2 += 30; }
            if (trickC[1] == 4) { wordsB += "玩家C彩金三條(-1)"; test2 -= 1; }
            else if (trickC[1] == 9) { wordsB += "玩家C彩金葫蘆(-2)"; test2 -= 2; }
            else if (trickC[1] == 10) { wordsB += "玩家C鐵支(-2)"; test2 -= 2; }
            else if (trickC[1] == 12) { wordsB += "玩家C同花順(-2)"; test2 -= 2; }
            else if (trickC[1] == 11) { wordsB += "玩家C彩金鐵支(-5)"; test2 -= 5; }
            else if (trickC[1] == 13) { wordsB += "玩家C五枚(-10)"; test2 -= 10; }
            if (trickD[1] == 4) { wordsB += "玩家D彩金三條(-1)"; test2 -= 1; }
            else if (trickD[1] == 9) { wordsB += "玩家D彩金葫蘆(-2)"; test2 -= 2; }
            else if (trickD[1] == 10) { wordsB += "玩家D鐵支(-2)"; test2 -= 2; }
            else if (trickD[1] == 12) { wordsB += "玩家D同花順(-2)"; test2 -= 2; }
            else if (trickD[1] == 11) { wordsB += "玩家D彩金鐵支(-5)"; test2 -= 5; }
            else if (trickD[1] == 13) { wordsB += "玩家D五枚(-10)"; test2 -= 10; }
            //C
            wordsC = "";
            wordsC = "玩家C:<br>";
            if (trickC[1] > trickA[1]) {
                wordsC += "大於玩家A(+1) ";
                test3 += 1;
                homerunC += 1;
            }
            else if (trickC[1] == trickA[1]) {
                wordsC += "等於玩家A(+0) ";
            }
            else {
                wordsC += "小於玩家A(-1) ";
                test3 -= 1;
            }
            if (trickC[1] > trickB[1]) {
                wordsC += "大於玩家B(+1) ";
                test3 += 1;
                homerunC += 1;
            }
            else if (trickB[1] == trickC[1]) {
                wordsC += "等於玩家B(+0) ";
            }
            else {
                wordsC += "小於玩家B(-1) ";
                test3 -= 1;
            }
            if (trickC[1] > trickD[1]) {
                wordsC += "大於玩家D(+1) ";
                test3 += 1;
                homerunC += 1;
            }
            else if (trickC[1] == trickD[1]) {
                wordsC += "等於玩家D(+0) ";
            }
            else {
                wordsC += "小於玩家D(-1) ";
                test3 -= 1;
            }
            wordsC += "<br>";
            if (trickA[1] == 4) { wordsC += "玩家A彩金三條(-1)"; test3 -= 1; }
            else if (trickA[1] == 9) { wordsC += "玩家A彩金葫蘆(-2)"; test3 -= 2; }
            else if (trickA[1] == 10) { wordsC += "玩家A鐵支(-2)"; test3 -= 2; }
            else if (trickA[1] == 12) { wordsC += "玩家A同花順(-2)"; test3 -= 2; }
            else if (trickA[1] == 11) { wordsC += "玩家A彩金鐵支(-5)"; test3 -= 5; }
            else if (trickA[1] == 13) { wordsC += "玩家A五枚(-10)"; test3 -= 10; }
            if (trickB[1] == 4) { wordsC += "玩家B彩金三條(-1)"; test3 -=1; }
            else if (trickB[1] == 9) { wordsC += "玩家B彩金葫蘆(-2)"; test3 -=2; }
            else if (trickB[1] == 10) { wordsC += "玩家B鐵支(-2)"; test3 -=2; }
            else if (trickB[1] == 12) { wordsC += "玩家B同花順(-2)"; test3 -=2; }
            else if (trickB[1] == 11) { wordsC += "玩家B彩金鐵支(-5)"; test3 -=5; }
            else if (trickB[1] == 13) { wordsC += "玩家B五枚(-10)"; test3 -=10; }
            if (trickC[1] == 4) { wordsC += "玩家C彩金三條(+3)"; test3 += 3; }
            else if (trickC[1] == 9) { wordsC += "玩家C彩金葫蘆(+6)"; test3 += 6; }
            else if (trickC[1] == 10) { wordsC += "玩家C鐵支(+6)"; test3 += 6; }
            else if (trickC[1] == 12) { wordsC += "玩家C同花順(+6)"; test3 += 6; }
            else if (trickC[1] == 11) { wordsC += "玩家C彩金鐵支(+15)"; test3 += 15; }
            else if (trickC[1] == 13) { wordsC += "玩家C五枚(+30)"; test3 += 30; }
            if (trickD[1] == 4) { wordsC += "玩家D彩金三條(-1)"; test3 -= 1; }
            else if (trickD[1] == 9) { wordsC += "玩家D彩金葫蘆(-2)"; test3 -= 2; }
            else if (trickD[1] == 10) { wordsC += "玩家D鐵支(-2)"; test3 -= 2; }
            else if (trickD[1] == 12) { wordsC += "玩家D同花順(-2)"; test3 -= 2; }
            else if (trickD[1] == 11) { wordsC += "玩家D彩金鐵支(-5)"; test3 -= 5; }
            else if (trickD[1] == 13) { wordsC += "玩家D五枚(-10)"; test3 -= 10; }
            //D
            wordsD = "";
            wordsD = "玩家D:<br>";
            if (trickD[1] > trickA[1]) {
                wordsD += "大於玩家A(+1) ";
                test4 += 1;
                homerunD += 1;
            }
            else if (trickD[1] == trickA[1]) {
                wordsD += "等於玩家A(+0) ";
            }
            else {
                wordsD += "小於玩家A(-1) ";
                test4 -= 1;
            }
            if (trickD[1] > trickB[1]) {
                wordsD += "大於玩家B(+1) ";
                test4 += 1;
                homerunD += 1;
            }
            else if (trickB[1] == trickD[1]) {
                wordsD += "等於玩家B(+0) ";
            }
            else {
                wordsD += "小於玩家B(-1) ";
                test4 -= 1;
            }
            if (trickD[1] > trickC[1]) {
                wordsD += "大於玩家C(+1) ";
                test4 += 1;
                homerunD += 1;
            }
            else if (trickC[1] == trickD[1]) {
                wordsD += "等於玩家C(+0) ";
            }
            else {
                wordsD += "小於玩家C(-1) ";
                test4 -= 1;
            }
            wordsD += "<br>";
            if (trickA[1] == 4) { wordsD += "玩家A彩金三條(-1)"; test4 -= 1; }
            else if (trickA[1] == 9) { wordsD += "玩家A彩金葫蘆(-2)"; test4 -= 2; }
            else if (trickA[1] == 10) { wordsD += "玩家A鐵支(-2)"; test4 -= 2; }
            else if (trickA[1] == 12) { wordsD += "玩家A同花順(-2)"; test4 -= 2; }
            else if (trickA[1] == 11) { wordsD += "玩家A彩金鐵支(-5)"; test4 -= 5; }
            else if (trickA[1] == 13) { wordsD += "玩家A五枚(-10)"; test4 -= 10; }
            if (trickB[1] == 4) { wordsD += "玩家B彩金三條(-1)"; test4 -= 1; }
            else if (trickB[1] == 9) { wordsD += "玩家B彩金葫蘆(-2)"; test4 -= 2; }
            else if (trickB[1] == 10) { wordsD += "玩家B鐵支(-2)"; test4 -= 2; }
            else if (trickB[1] == 12) { wordsD += "玩家B同花順(-2)"; test4 -= 2; }
            else if (trickB[1] == 11) { wordsD += "玩家B彩金鐵支(-5)"; test4 -= 5; }
            else if (trickB[1] == 13) { wordsD += "玩家B五枚(-10)"; test4 -= 10; }
            if (trickC[1] == 4) { wordsD += "玩家C彩金三條(-1)"; test4 -= 1; }
            else if (trickC[1] == 9) { wordsD += "玩家C彩金葫蘆(-2)"; test4 -= 2; }
            else if (trickC[1] == 10) { wordsD += "玩家C鐵支(-2)"; test4 -=2; }
            else if (trickC[1] == 12) { wordsD += "玩家C同花順(-2)"; test4 -= 2; }
            else if (trickC[1] == 11) { wordsD += "玩家C彩金鐵支(-5)"; test4 -= 5; }
            else if (trickC[1] == 13) { wordsD += "玩家C五枚(-10)"; test4 -= 10; }
            if (trickD[1] == 4) { wordsD += "玩家D彩金三條(+3)"; test4 += 3; }
            else if (trickD[1] == 9) { wordsD += "玩家D彩金葫蘆(+6)"; test4 += 6; }
            else if (trickD[1] == 10) { wordsD += "玩家D鐵支(+6)"; test4 += 6; }
            else if (trickD[1] == 12) { wordsD += "玩家D同花順(+6)"; test4 += 6; }
            else if (trickD[1] == 11) { wordsD += "玩家D彩金鐵支(+15)"; test4 += 15; }
            else if (trickD[1] == 13) { wordsD += "玩家D五枚(+30)"; test4 += 30; }
            totalA += test1; totalB += test2; totalC += test3; totalD += test4;
            wordsA += "<br>玩家A頭墩這次獲得" + test1 + "墩牌(共" + totalA + "墩)";
            wordsB += "<br>玩家B頭墩這次獲得" + test2 + "墩牌(共" + totalB + "墩)";
            wordsC += "<br>玩家C頭墩這次獲得" + test3 + "墩牌(共" + totalC + "墩)";
            wordsD += "<br>玩家D頭墩這次獲得" + test4 + "墩牌(共" + totalD + "墩)";
            document.getElementById("comA").innerHTML = wordsA;
            document.getElementById("comB").innerHTML = wordsB;
            document.getElementById("comC").innerHTML = wordsC;
            document.getElementById("comD").innerHTML = wordsD;
            document.getElementById("ohmygoddesu").style.display = "initial";
            document.getElementById("ohmygoddesu").addEventListener("click", function () {
                if (now_for_compare == 2) {
                    now_for_compare = 3;
                    document.getElementById("compare").src = "imgs/比較" + now_for_compare + ".png";
                    document.getElementById("compare").style.display = "initial";
                    document.getElementById("ohmygoddesu").style.display = "none";
                }                
            })
        }
        function tail() {
            document.getElementById("compare").style.display = "none";
            document.getElementById("comA").innerHTML = ""; document.getElementById("comB").innerHTML = "";
            document.getElementById("comC").innerHTML = ""; document.getElementById("comD").innerHTML = "";
            test1 = 0; test2 = 0; test3 = 0; test4 = 0;
            wordsA = ""; wordsB = ""; wordsC = ""; wordsD = "";
            //A            
            wordsA = "玩家A(你):<br>";
            if (trickA[2] > trickB[2]) {
                wordsA += "大於玩家B(+1) ";
                test1 += 1;
                homerunA += 1;
            }
            else if (trickA[2] == trickB[2]) {
                wordsA += "等於玩家B(+0) ";
            }
            else {
                wordsA += "小於玩家B(-1) ";
                test1 -= 1;
            }
            if (trickA[2] > trickC[2]) {
                wordsA += "大於玩家C(+1) ";
                homerunA += 1;
                test1 += 1;
            }
            else if (trickA[2] == trickC[2]) {
                wordsA += "等於玩家C(+0) ";
            }
            else {
                wordsA += "小於玩家C(-1) ";
                test1 -= 1;
            }
            if (trickA[2] > trickD[2]) {
                wordsA += "大於玩家D(+1) ";
                homerunA += 1;
                test1 += 1;
            }
            else if (trickA[2] == trickD[2]) {
                wordsA += "等於玩家D(+0) ";
            }
            else {
                wordsA += "小於玩家D(-1) ";
                test1 -= 1;
            }//五枚13>同花順12>彩金鐵支11>鐵支10>彩金葫蘆9>葫蘆8>對子同花7>同花6>順子5>彩金三條4>三條3>兩對2<一對1>烏龍0
            wordsA += "<br>";
            if (trickA[2] == 4) { wordsA += "玩家A彩金三條(+3)"; test1 += 3; }
            else if (trickA[2] == 9) { wordsA += "玩家A彩金葫蘆(+3)"; test1 += 3; }
            else if (trickA[2] == 10) { wordsA += "玩家A鐵支(+3)"; test1 += 3; }
            else if (trickA[2] == 12) { wordsA += "玩家A同花順(+3)"; test1 += 3; }
            else if (trickA[2] == 11) { wordsA += "玩家A彩金鐵支(+15)"; test1 += 15; }
            else if (trickA[2] == 13) { wordsA += "玩家A五枚(+15)"; test1 += 15; }
            if (trickB[2] == 4) { wordsA += "玩家B彩金三條(-1)"; test1 -= 1; }
            else if (trickB[2] == 9) { wordsA += "玩家B彩金葫蘆(-1)"; test1 -= 1; }
            else if (trickB[2] == 10) { wordsA += "玩家B鐵支(-1)"; test1 -= 1; }
            else if (trickB[2] == 12) { wordsA += "玩家B同花順(-1)"; test1 -= 1; }
            else if (trickB[2] == 11) { wordsA += "玩家B彩金鐵支(-5)"; test1 -= 5; }
            else if (trickB[2] == 13) { wordsA += "玩家B五枚(-5)"; test1 -= 5; }
            if (trickC[1] == 4) { wordsA += "玩家C彩金三條(-1)"; test1 -= 1; }
            else if (trickC[2] == 9) { wordsA += "玩家C彩金葫蘆(-1)"; test1 -= 1; }
            else if (trickC[2] == 10) { wordsA += "玩家C鐵支(-1)"; test1 -= 1; }
            else if (trickC[2] == 12) { wordsA += "玩家C同花順(-1)"; test1 -= 1; }
            else if (trickC[2] == 11) { wordsA += "玩家C彩金鐵支(-5)"; test1 -= 5; }
            else if (trickC[2] == 13) { wordsA += "玩家C五枚(-5)"; test1 -= 5; }
            if (trickD[1] == 4) { wordsA += "玩家D彩金三條(-1)"; test1 -= 1; }
            else if (trickD[2] == 9) { wordsA += "玩家D彩金葫蘆(-1)"; test1 -= 1; }
            else if (trickD[2] == 10) { wordsA += "玩家D鐵支(-1)"; test1 -= 1; }
            else if (trickD[2] == 12) { wordsA += "玩家D同花順(-1)"; test1 -= 1; }
            else if (trickD[2] == 11) { wordsA += "玩家D彩金鐵支(-5)"; test1 -= 5; }
            else if (trickD[2] == 13) { wordsA += "玩家D五枚(-5)"; test1 -= 5; }
            //B
            wordsB = "";
            wordsB = "玩家B:<br>";
            if (trickB[2] > trickA[2]) {
                wordsB += "大於玩家A(+1) ";
                test2 += 1;
                homerunB += 1;
            }
            else if (trickB[2] == trickA[2]) {
                wordsB += "等於玩家A(+0) ";
            }
            else {
                wordsB += "小於玩家A(-1) ";
                test2 -= 1;
            }
            if (trickB[2] > trickC[2]) {
                wordsB += "大於玩家C(+1) ";
                homerunB += 1;
                test2 += 1;
            }
            else if (trickB[2] == trickC[2]) {
                wordsB += "等於玩家C(+0) ";
            }
            else {
                wordsB += "小於玩家C(-1) ";
                test2 -= 1;
            }
            if (trickB[2] > trickD[2]) {
                wordsB += "大於玩家D(+1) ";
                homerunB += 1;
                test2 += 1;
            }
            else if (trickB[2] == trickD[2]) {
                wordsB += "等於玩家D(+0) ";
            }
            else {
                wordsB += "小於玩家D(-1) ";
                test2 -= 1;
            }
            wordsB += "<br>";
            if (trickA[2] == 4) { wordsB += "玩家A彩金三條(-1)"; test2 -= 1; }
            else if (trickA[2] == 9) { wordsB += "玩家A彩金葫蘆(-1)"; test2 -= 1; }
            else if (trickA[2] == 10) { wordsB += "玩家A鐵支(-1)"; test2 -= 1; }
            else if (trickA[2] == 12) { wordsB += "玩家A同花順(-1)"; test2 -= 1; }
            else if (trickA[2] == 11) { wordsB += "玩家A彩金鐵支(-5)"; test2 -= 5; }
            else if (trickA[2] == 13) { wordsB += "玩家A五枚(-5)"; test2 -= 5; }
            if (trickB[2] == 4) { wordsB += "玩家B彩金三條(+3)"; test2 += 3; }
            else if (trickB[2] == 9) { wordsB += "玩家B彩金葫蘆(+3)"; test2 += 3; }
            else if (trickB[2] == 10) { wordsB += "玩家B鐵支(+3)"; test2 += 3; }
            else if (trickB[2] == 12) { wordsB += "玩家B同花順(+3)"; test2 += 3; }
            else if (trickB[2] == 11) { wordsB += "玩家B彩金鐵支(+15)"; test2 += 15; }
            else if (trickB[2] == 13) { wordsB += "玩家B五枚(+15)"; test2 += 15; }
            if (trickC[2] == 4) { wordsB += "玩家C彩金三條(-1)"; test2 -= 1; }
            else if (trickC[2] == 9) { wordsB += "玩家C彩金葫蘆(-1)"; test2 -= 1; }
            else if (trickC[2] == 10) { wordsB += "玩家C鐵支(-1)"; test2 -= 1; }
            else if (trickC[2] == 12) { wordsB += "玩家C同花順(-1)"; test2 -= 1; }
            else if (trickC[2] == 11) { wordsB += "玩家C彩金鐵支(-5)"; test2 -= 5; }
            else if (trickC[2] == 13) { wordsB += "玩家C五枚(-5)"; test2 -= 5; }
            if (trickD[2] == 4) { wordsB += "玩家D彩金三條(-1)"; test2 -= 1; }
            else if (trickD[2] == 9) { wordsB += "玩家D彩金葫蘆(-1)"; test2 -= 1; }
            else if (trickD[2] == 10) { wordsB += "玩家D鐵支(-1)"; test2 -= 1; }
            else if (trickD[2] == 12) { wordsB += "玩家D同花順(-1)"; test2 -= 1; }
            else if (trickD[2] == 11) { wordsB += "玩家D彩金鐵支(-5)"; test2 -= 5; }
            else if (trickD[2] == 13) { wordsB += "玩家D五枚(-5)"; test2 -= 5; }
            //C
            wordsC = "";
            wordsC = "玩家C:<br>";
            if (trickC[2] > trickA[2]) {
                wordsC += "大於玩家A(+1) ";
                test3 += 1;
                homerunC += 1;
            }
            else if (trickC[2] == trickA[2]) {
                wordsC += "等於玩家A(+0) ";
            }
            else {
                wordsC += "小於玩家A(-1) ";
                test3 -= 1;
            }
            if (trickC[2] > trickB[2]) {
                wordsC += "大於玩家B(+1) ";
                homerunC += 1;
                test3 += 1;
            }
            else if (trickB[2] == trickC[2]) {
                wordsC += "等於玩家B(+0) ";
            }
            else {
                wordsC += "小於玩家B(-1) ";
                test3 -= 1;
            }
            if (trickC[2] > trickD[2]) {
                wordsC += "大於玩家D(+1) ";
                homerunC += 1;
                test3 += 1;
            }
            else if (trickC[2] == trickD[2]) {
                wordsC += "等於玩家D(+0) ";
            }
            else {
                wordsC += "小於玩家D(-1) ";
                test3 -= 1;
            }
            wordsC += "<br>";
            if (trickA[2] == 4) { wordsC += "玩家A彩金三條(-1)"; test3 -= 1; }
            else if (trickA[2] == 9) { wordsC += "玩家A彩金葫蘆(-1)"; test3 -= 1; }
            else if (trickA[2] == 10) { wordsC += "玩家A鐵支(-1)"; test3 -= 1; }
            else if (trickA[2] == 12) { wordsC += "玩家A同花順(-1)"; test3 -= 1; }
            else if (trickA[2] == 11) { wordsC += "玩家A彩金鐵支(-5)"; test3 -= 5; }
            else if (trickA[2] == 13) { wordsC += "玩家A五枚(-5)"; test3 -= 5; }
            if (trickB[2] == 4) { wordsC += "玩家B彩金三條(-1)"; test3 -= 1; }
            else if (trickB[2] == 9) { wordsC += "玩家B彩金葫蘆(-1)"; test3 -= 1; }
            else if (trickB[2] == 10) { wordsC += "玩家B鐵支(-1)"; test3 -= 1; }
            else if (trickB[2] == 12) { wordsC += "玩家B同花順(-1)"; test3 -= 1; }
            else if (trickB[2] == 11) { wordsC += "玩家B彩金鐵支(-5)"; test3 -= 5; }
            else if (trickB[2] == 13) { wordsC += "玩家B五枚(-5)"; test3 -= 5; }
            if (trickC[2] == 4) { wordsC += "玩家C彩金三條(+3)"; test3 += 3; }
            else if (trickC[2] == 9) { wordsC += "玩家C彩金葫蘆(+3)"; test3 += 3; }
            else if (trickC[2] == 10) { wordsC += "玩家C鐵支(+3)"; test3 += 3; }
            else if (trickC[2] == 12) { wordsC += "玩家C同花順(+3)"; test3 += 3; }
            else if (trickC[2] == 11) { wordsC += "玩家C彩金鐵支(+15)"; test3 += 15; }
            else if (trickC[2] == 13) { wordsC += "玩家C五枚(+15)"; test3 += 15; }
            if (trickD[2] == 4) { wordsC += "玩家D彩金三條(-1)"; test3 -= 1; }
            else if (trickD[2] == 9) { wordsC += "玩家D彩金葫蘆(-1)"; test3 -= 1; }
            else if (trickD[2] == 10) { wordsC += "玩家D鐵支(-1)"; test3 -= 1; }
            else if (trickD[2] == 12) { wordsC += "玩家D同花順(-1)"; test3 -= 1; }
            else if (trickD[2] == 11) { wordsC += "玩家D彩金鐵支(-5)"; test3 -= 5; }
            else if (trickD[2] == 13) { wordsC += "玩家D五枚(-5)"; test3 -= 5; }
            //D
            wordsD = "";
            wordsD = "玩家D:<br>";
            if (trickD[2] > trickA[2]) {
                wordsD += "大於玩家A(+1) ";
                test4 += 1;
                homerunD += 1;
            }
            else if (trickD[2] == trickA[2]) {
                wordsD += "等於玩家A(+0) ";
            }
            else {
                wordsD += "小於玩家A(-1) ";
                test4 -= 1;
            }
            if (trickD[2] > trickB[2]) {
                wordsD += "大於玩家B(+1) ";
                homerunD += 1;
                test4 += 1;
            }
            else if (trickB[2] == trickD[2]) {
                wordsD += "等於玩家B(+0) ";
            }
            else {
                wordsD += "小於玩家B(-1) ";
                test4 -= 1;
            }
            if (trickD[2] > trickC[2]) {
                wordsD += "大於玩家C(+1) ";
                homerunD += 1;
                test4 += 1;
            }
            else if (trickC[2] == trickD[2]) {
                wordsD += "等於玩家C(+0) ";
            }
            else {
                wordsD += "小於玩家C(-1) ";
                test4 -= 1;
            }
            wordsD += "<br>";
            if (trickA[2] == 4) { wordsD += "玩家A彩金三條(-1)"; test4 -= 1; }
            else if (trickA[2] == 9) { wordsD += "玩家A彩金葫蘆(-1)"; test4 -= 1; }
            else if (trickA[2] == 10) { wordsD += "玩家A鐵支(-1)"; test4 -= 1; }
            else if (trickA[2] == 12) { wordsD += "玩家A同花順(-1)"; test4 -= 1; }
            else if (trickA[2] == 11) { wordsD += "玩家A彩金鐵支(-5)"; test4 -= 5; }
            else if (trickA[2] == 13) { wordsD += "玩家A五枚(-5)"; test4 -= 5; }
            if (trickB[2] == 4) { wordsD += "玩家B彩金三條(-1)"; test4 -= 1; }
            else if (trickB[2] == 9) { wordsD += "玩家B彩金葫蘆(-1)"; test4 -= 1; }
            else if (trickB[2] == 10) { wordsD += "玩家B鐵支(-1)"; test4 -= 1; }
            else if (trickB[2] == 12) { wordsD += "玩家B同花順(-1)"; test4 -= 1; }
            else if (trickB[2] == 11) { wordsD += "玩家B彩金鐵支(-5)"; test4 -= 5; }
            else if (trickB[2] == 13) { wordsD += "玩家B五枚(-5)"; test4 -= 5; }
            if (trickC[2] == 4) { wordsD += "玩家C彩金三條(-1)"; test4 -= 1; }
            else if (trickC[2] == 9) { wordsD += "玩家C彩金葫蘆(-1)"; test4 -= 1; }
            else if (trickC[2] == 10) { wordsD += "玩家C鐵支(-1)"; test4 -= 1; }
            else if (trickC[2] == 12) { wordsD += "玩家C同花順(-1)"; test4 -= 1; }
            else if (trickC[2] == 11) { wordsD += "玩家C彩金鐵支(-5)"; test4 -= 5; }
            else if (trickC[2] == 13) { wordsD += "玩家C五枚(-5)"; test4 -= 5; }
            if (trickD[2] == 4) { wordsD += "玩家D彩金三條(+3)"; test4 += 3; }
            else if (trickD[2] == 9) { wordsD += "玩家D彩金葫蘆(+3)"; test4 += 3; }
            else if (trickD[2] == 10) { wordsD += "玩家D鐵支(+3)"; test4 += 3; }
            else if (trickD[2] == 12) { wordsD += "玩家D同花順(+3)"; test4 += 3; }
            else if (trickD[2] == 11) { wordsD += "玩家D彩金鐵支(+15)"; test4 += 15; }
            else if (trickD[2] == 13) { wordsD += "玩家D五枚(+15)"; test4 += 15; }
            if (homerunA == 9) {
                wordsD += "玩家A全壘打"; test1 += 3; test2 -= 1; test3 -= 1; test4 -= 1;
            }
            if (homerunB == 9) {
                wordsD += "玩家B全壘打"; test2 += 3; test1 -= 1; test3 -= 1; test4 -= 1;
            }
            if (homerunC == 9) {
                wordsD += "玩家C全壘打"; test3 += 3; test2 -= 1; test1 -= 1; test4 -= 1;
            }
            if (homerunD == 9) {
                wordsD += "玩家D全壘打"; test4 += 3; test2 -= 1; test3 -= 1; test1 -= 1;
            }
            totalA += test1; totalB += test2; totalC += test3; totalD += test4;
            wordsA += "<br>玩家A頭墩這次獲得" + test1 + "墩牌(共" + totalA + "墩)";
            wordsB += "<br>玩家B頭墩這次獲得" + test2 + "墩牌(共" + totalB + "墩)";
            wordsC += "<br>玩家C頭墩這次獲得" + test3 + "墩牌(共" + totalC + "墩)";
            wordsD += "<br>玩家D頭墩這次獲得" + test4 + "墩牌(共" + totalD + "墩)";
            document.getElementById("comA").innerHTML = wordsA;
            document.getElementById("comB").innerHTML = wordsB;
            document.getElementById("comC").innerHTML = wordsC;
            document.getElementById("comD").innerHTML = wordsD;
            document.getElementById("ohmygoddesu").style.display = "initial";
            document.getElementById("ohmygoddesu").addEventListener("click", function () {               
                if (now_for_compare == 3) {
                    alert("end");
                }
            })
        }
        function COMPARE() {//Step1:先得到牌型Step2:比牌型Step3:比同牌型大小
            gold = parseInt(data.key8);
            player_trick();
            switch (now_for_compare) {
                case 1://比較頭墩
                    head();
                    break;
                case 2://比較二道
                    mid();
                    break;
                case 3://比較尾墩
                    tail();
                    break;
            }
        }
        function player_trick() {
            //head
            sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            for (let j = 0; j < 3; j++) {
                sys[A1[j] % 13] += 1;
            }
            for (let j = 0; j < 13; j++) {
                if (sys[j] == 3) {
                    if (gold % 13 == A1[0] % 13) {
                        trickA[0] = 4;
                        break;
                    }
                    else {
                        trickA[0] = 3;
                        break;
                    }
                }
                else if (sys[j] == 2) {
                    trickA[0] = 1;
                    break;
                }                        
            }
            //mid
            sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            index = 0;
            for (let j = 0; j < 5; j++) {
                sys[A2[j] % 13] += 1;
                if (A2[j] > 0 && A2[j] < 14) {
                    now[0]++;
                }
                if (A2[j] > 13 && A2[j] < 27) {
                    now[1]++;
                }
                if (A2[j] > 26 && A2[j] < 40) {
                    now[2]++;
                }
                if (A2[j] > 39) {
                    now[3]++;
                }
                if (A2[j] % 13 == gold % 13) {
                    now[6]++;
                }
            }
            //五枚13//鐵支10
            for (let j = 0; j < 13; j++) {
                if (sys[j] == 5) {
                    trickA[1] = 13;
                    index = 1;
                    break;
                }
                else if (sys[j] == 4) {                   
                    if ((A2[0] % 13 == gold % 13 && A2[1] % 13 == gold % 13) || (A2[2] % 13 == gold % 13 && A2[3] % 13 == gold % 13)) {
                        trickA[1] = 11;
                        index = 1;
                    }
                    else {
                        trickA[1] = 10;
                        index = 1;
                    }
                    break;
                }
            }
            //葫蘆8//三條3//兩對2//一對1
            if (index == 0) {//五枚13>同花順12>彩金鐵支11>鐵支10>彩金葫蘆9>葫蘆8>對子同花7>同花6>順子5>彩金三條4>三條3>兩對2<一對1>烏龍0
                for (let j = 0; j < 13; j++) {
                    if (sys[j] == 3) {
                        now[4]++;
                    }
                    if (sys[j] == 2) {
                        now[5]++;
                    }
                }
                if (now[4] > 0 && now[5] > 0) {
                    if (now[6] == 3) {
                        trickA[1] = 9;
                        index = 1;
                    }
                    else {
                        trickA[1] = 8;
                        index = 1;
                    }                    
                }
                else if (now[4] > 0) {
                    trickA[1] = 3;
                    index = 1;
                }
                else if (now[5] > 1) {
                    trickA[1] = 2;
                    index = 1;
                }
                else if (now[5] > 0) {
                    trickA[1] = 1;
                    index = 1;
                }
            }           
            //桐花順12//桐花6//順子5 
            if (index == 0) {
                for (let j = 0; j < 4; j++) {
                    if (now[j] == 5) {//桐花系列
                        for (let i = 0; i < 13; i++) {
                            if (sys[i] == 1) {
                                if (sys[i + 1] == 1 && sys[i + 2] == 1 && sys[i + 3] == 1 && sys[i + 4] == 1) {
                                    trickA[1] = 12;
                                    index = 1;
                                }
                                else {
                                    trickA[1] = 6;
                                    index = 1;
                                }
                                break;
                            }                          
                        }
                    }
                    else {//順子判定
                        for (let i = 0; i < 13; i++) {
                            if (sys[i] == 1) {
                                if (sys[i + 1] == 1 && sys[i + 2] == 1 && sys[i + 3] == 1 && sys[i + 4] == 1) {
                                    trickA[1] = 5;
                                    index = 1;
                                }
                                break;
                            }
                        }
                    }
                }
            }
            //tail
            sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            index = 0;
            for (let j = 0; j < 5; j++) {
                sys[A3[j] % 13] += 1;
                if (A3[j] > 0 && A3[j] < 14) {
                    now[0]++;
                }
                if (A3[j] > 13 && A3[j] < 27) {
                    now[1]++;
                }
                if (A3[j] > 26 && A3[j] < 40) {
                    now[2]++;
                }
                if (A3[j] > 39) {
                    now[3]++;
                }
                if (A3[j] % 13 == gold % 13) {
                    now[6]++;
                }
            }
            //五枚13//鐵支10
            for (let j = 0; j < 13; j++) {
                if (sys[j] == 5) {
                    trickA[2] = 13;
                    index = 1;
                    break;
                }
                else if (sys[j] == 4) {
                    if ((A3[0] % 13 == gold % 13 && A3[1] % 13 == gold % 13) || (A3[2] % 13 == gold % 13 && A3[3] % 13 == gold % 13)) {
                        trickA[2] = 11;
                        index = 1;
                    }
                    else {
                        trickA[2] = 10;
                        index = 1;
                    }
                    break;
                }
            }
            //葫蘆8//三條3//兩對2//一對1
            if (index == 0) {
                for (let j = 0; j < 13; j++) {
                    if (sys[j] == 3) {
                        now[4]++;
                    }
                    if (sys[j] == 2) {
                        now[5]++;
                    }
                }
                if (now[4] > 0 && now[5] > 0) {
                    if (now[6] == 3) {
                        trickA[2] = 9;
                        index = 1;
                    }
                    else {
                        trickA[2] = 8;
                        index = 1;
                    }
                }
                else if (now[4] > 0) {
                    trickA[2] = 3;
                    index = 1;
                }
                else if (now[5] > 1) {
                    trickA[2] = 2;
                    index = 1;
                }
                else if (now[5] > 0) {
                    trickA[2] = 1;
                    index = 1;
                }
            }
            //桐花順12//桐花6//順子5 
            if (index == 0) {
                for (let j = 0; j < 4; j++) {
                    if (now[j] == 5) {//桐花系列
                        for (let i = 0; i < 13; i++) {
                            if (sys[i] == 1) {
                                if (sys[i + 1] == 1 && sys[i + 2] == 1 && sys[i + 3] == 1 && sys[i + 4] == 1) {
                                    trickA[2] = 12;
                                    index = 1;
                                }
                                else {
                                    trickA[2] = 6;
                                    index = 1;
                                }
                                break;
                            }                           
                        }
                    }
                    else {//順子判定
                        for (let i = 0; i < 13; i++) {
                            if (sys[i] == 1) {
                                if (sys[i + 1] == 1 && sys[i + 2] == 1 && sys[i + 3] == 1 && sys[i + 4] == 1) {
                                    trickA[2] = 5;
                                    index = 1;
                                }
                                break;
                            }
                        }
                    }
                }
            }
        }
        function AI(AIarray, head, mid, tail, bcd, trick) {
            //五枚13
            test1 = 0; test2 = 0; test3 = 0;
            sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            index = 0;
            for (let j = 0; j < 16; j++) {
                sys[AIarray[j] % 13] += 1;
            }
            for (let j = 0; j < 13; j++) {
                if (sys[j] == 5) {
                    for (let k = 0; k < 16; k++) {
                        if (AIarray[k] % 13 == j) {
                            if (test3 == 0) {
                                test3 = 1;
                                tail[index] = AIarray[k];
                                trick[2] = 13;
                                index += 1;
                                AIarray[k] = -1;
                            }
                            else if (test2 == 0) {
                                test2 = 1;
                                mid[index] = AIarray[k];
                                trick[1] = 13;
                                index += 1;
                                AIarray[k] = -1;
                            }
                        }
                    }
                }
            }
            //同花順12
            sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            index = 0;
            for (let j = 0; j < 16; j++) {
                if (AIarray[j] > 0 && AIarray[j] < 14) {
                    sys[0]++;
                }
                if (AIarray[j] > 13 && AIarray[j] < 27) {
                    sys[1]++;
                }
                if (AIarray[j] > 26 && AIarray[j] < 40) {
                    sys[2]++;
                }
                if (AIarray[j] > 39) {
                    sys[3]++;
                }
            }
            for (let j = 0; j < 4; j++) {
                if (sys[j] > 4) {
                    switch (j) {
                        case 0://梅花
                            now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] <= 13) {
                                    now[AIarray[k] - 1] = 1;
                                }
                            }
                            for (let k = 0; k < 9; k++) {
                                i = 0;
                                if (now[k] > 0 && now[k + 1] > 0 && now[k + 2] > 0 && now[k + 3] > 0 && now[k + 4] > 0) {
                                    i = 1;
                                    gold = k + 1;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 13) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            break;
                                        }
                                    }
                                    gold = k + 2;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 13) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 3;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 13) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 4;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 13) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 5;
                                    if (gold == 13) gold = 0;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 13) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    if (test3 == 0) {
                                        test3 = 1;
                                        trick[2] = 12;
                                    }
                                    else if (test2 == 0) {
                                        test2 = 1;
                                        trick[1] = 12;
                                    }
                                }

                            }
                            break;
                        case 1://磚塊
                            now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] <= 26 && AIarray[k] >= 14) {
                                    gold = AIarray[k] % 13;
                                    if (gold != 0) {
                                        now[gold - 1] = 1;
                                    }
                                    else {
                                        now[12] = 1;
                                    }
                                }
                            }
                            for (let k = 0; k < 9; k++) {
                                i = 0;
                                if (now[k] > 0 && now[k + 1] > 0 && now[k + 2] > 0 && now[k + 3] > 0 && now[k + 4] > 0) {

                                    i = 1;
                                    gold = k + 1;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 26 && AIarray[l] >= 14) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 2;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 26 && AIarray[l] >= 14) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 3;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 26 && AIarray[l] >= 14) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 4;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 26 && AIarray[l] >= 14) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 5;
                                    if (gold == 13) gold = 0;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 26 && AIarray[l] >= 14) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    if (test3 == 0) {
                                        test3 = 1;
                                        trick[2] = 12;
                                    }
                                    else if (test2 == 0) {
                                        test2 = 1;
                                        trick[1] = 12;
                                    }
                                }
                            }
                            break;
                        case 2://愛心
                            now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] <= 39 && AIarray[k] >= 27) {
                                    gold = AIarray[k] % 13;
                                    if (gold != 0) {
                                        now[gold - 1] = 1;
                                    }
                                    else {
                                        now[12] = 1;
                                    }
                                }
                            }
                            for (let k = 0; k < 9; k++) {
                                i = 0;
                                if (now[k] > 0 && now[k + 1] > 0 && now[k + 2] > 0 && now[k + 3] > 0 && now[k + 4] > 0) {

                                    i == 1;
                                    gold = k + 1;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 39 && AIarray[l] >= 27) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 2;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 39 && AIarray[l] >= 27) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {;
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 3;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 39 && AIarray[l] >= 27) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 4;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 39 && AIarray[l] >= 27) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 5;
                                    if (gold == 13) gold = 0;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] <= 39 && AIarray[l] >= 27) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    if (test3 == 0) {
                                        test3 = 1;
                                        trick[2] = 12;
                                    }
                                    else if (test2 == 0) {
                                        test2 = 1;
                                        trick[1] = 12;
                                    }
                                }
                            }
                            break;
                        case 3://黑桃
                            now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                            
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] >= 40) {
                                    gold = AIarray[k] % 13;
                                    if (gold != 0) {
                                        now[gold - 1] = 1;
                                    }
                                    else {
                                        now[12] = 1;
                                    }
                                }
                            }
                            for (let k = 0; k < 9; k++) {
                                i = 0;
                                if (now[k] > 0 && now[k + 1] > 0 && now[k + 2] > 0 && now[k + 3] > 0 && now[k + 4] > 0) {
                                    i = 1;
                                    gold = k + 1;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] >= 40) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;   
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 2;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] >= 40) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 3;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] >= 40) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 4;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] >= 40) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    gold = k + 5;
                                    if (gold == 13) gold = 0;
                                    for (let l = 0; l < 16; l++) {
                                        if (AIarray[l] % 13 == gold && AIarray[l] >= 40) {
                                            if (test3 == 0) {
                                                tail[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                            else if (test2 == 0) {
                                                mid[index] = AIarray[l];
                                                index += 1;
                                                AIarray[l] = -1;
                                                break;
                                            }
                                        }
                                    }
                                    if (test3 == 0) {
                                        test3 = 1;
                                        trick[2] = 12;
                                    }
                                    else if (test2 == 0) {
                                        test2 = 1;
                                        trick[1] = 12;
                                    }
                                }
                            }
                            break;
                    }
                }
            }
            console.log(bcd, AIarray);
            //鐵支10
            sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            index = 0;
            for (let j = 0; j < 16; j++) {
                sys[AIarray[j] % 13] += 1;
            }
            for (let j = 0; j < 13; j++) {
                if (sys[j] == 4) {
                    if (test3 == 0) {
                        test3 = -1;
                        for (let k = 0; k < 16; k++) {
                            if (AIarray[k] % 13 == j) {
                                tail[index] = AIarray[k];
                                trick[2] = 10;
                                index += 1;
                                AIarray[k] = -1;
                            }
                        }
                    }
                    else if (test2 == 0) {
                        test2 = -1;
                        for (let k = 0; k < 16; k++) {
                            if (AIarray[k] % 13 == j) {
                                tail[index] = AIarray[k];
                                trick[1] = 10;
                                index += 1;
                                AIarray[k] = -1;
                            }
                        }
                    }
                    break;
                }
            }
            //衝三判定(如果尾敦已經放置再衝(代表尾敦至少有鐵支以上))
            if (test3 != 0) {
                sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                index = 0;
                for (let j = 0; j < 16; j++) {
                    sys[AIarray[j] % 13] += 1;
                }
                for (let j = 0; j < 13; j++) {
                    if (sys[j] == 3) {
                        for (let k = 0; k < 16; k++) {
                            if (AIarray[k] % 13 == j) {
                                head[index] = AIarray[k];
                                trick[0] = 3;
                                index += 1;
                                AIarray[k] = -1;
                                now[index + 10] = k;
                            }
                        }
                        break;
                    }
                }
                if (test1 == 1) {//有三條可當頭，判斷有沒有合適的二道
                    //葫蘆
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 3) {
                            now[3]++;
                        }
                        if (sys[j] == 2) {
                            now[4]++;
                        }
                    }
                    index = 0;
                    if (now[3] > 0 && now[4] > 0) {
                        test2 = 1;
                        trick[1] = 8;
                        for (let j = 0; j < 13; j++) {
                            if (sys[j] == 3) {
                                for (let k = 0; k < 16; k++) {
                                    if (AIarray[k] % 13 == j) {
                                        mid[index] = AIarray[k];                              
                                        index += 1;
                                        AIarray[k] = -1;
                                    }
                                }
                                break;
                            }
                        }
                        for (let j = 0; j < 13; j++) {
                            if (sys[j] == 2) {
                                for (let k = 0; k < 16; k++) {
                                    if (AIarray[k] % 13 == j) {
                                        mid[index] = AIarray[k];
                                        index += 1;
                                        AIarray[k] = -1;
                                    }
                                }
                                break;
                            }
                        }
                    }
                    //同花
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        if (AIarray[j] > 0 && AIarray[j] < 14) {
                            sys[0]++;
                        }
                        if (AIarray[j] > 13 && AIarray[j] < 27) {
                            sys[1]++;
                        }
                        if (AIarray[j] > 26 && AIarray[j] < 40) {
                            sys[2]++;
                        }
                        if (AIarray[j] > 39) {
                            sys[3]++;
                        }
                    }
                    for (let j = 0; j < 4; j++) {
                        if (sys[j] >= 5) {
                            trick[1] = 6;
                            test2 = 1;
                            for (let k = 0; k < 16; k++) {
                                if (j == 3 && AIarray[k] > 39) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    if (index == 5) break;
                                }
                                else if (AIarray[k] < (14 + 13 * j) && AIarray[k] > (13 * j)) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    if (index == 5) break;
                                }
                            }
                            break;
                        }
                    }
                    //順子
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        gold = AIarray[j] % 13;
                        if (gold != 0) {
                            sys[gold - 1] += 1;
                        }
                        else {
                            sys[12] += 1;
                        }
                    }
                    for (let j = 0; j < 9; j++) {
                        if (sys[j] > 0 && sys[j + 1] > 0 && sys[j + 2] > 0 && sys[j + 3] > 0 && sys[j + 4] > 0) {
                            test2 = 1;
                            trick[1] = 5;
                            gold = j + 1;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 2;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 3;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 4;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 5;
                            if (gold == 13) gold = 0;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            break;
                        }
                    }
                    //三條
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 3) {
                            trick[1] = 3;
                            test2 = -2;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == j) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                }
                            }
                            break;
                        }
                    }
                }
                if (test2 == 0) {//沒有合適的二道(回歸到放尾的情況)
                    AIarray[now[10]] = head[0];
                    AIarray[now[11]] = head[1];
                    AIarray[now[12]] = head[2];
                    head = [0, 0, 0];
                }
                else {//都放好了(但可能缺牌)
                    test = 1;
                }
            }
            //到現在有幾種可能1.已經放好(111)2.一墩都沒放(000)3.放了尾(001)
            if (test1 == 1) {//放好
                //end
            }
            else {//其他
                //葫蘆
                if (test3 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 3) {
                            now[3]++;
                        }
                        if (sys[j] == 2) {
                            now[4]++;
                        }
                    }
                    index = 0;
                    if (now[3] > 0 && now[4] > 0) {
                        trick[2] = 8;
                        test3 = 1;
                        for (let j = 0; j < 13; j++) {
                            if (sys[j] == 3) {
                                for (let k = 0; k < 16; k++) {
                                    if (AIarray[k] % 13 == j) {
                                        tail[index] = AIarray[k];
                                        index += 1;
                                        AIarray[k] = -1;
                                    }
                                }
                                break;
                            }
                        }
                        for (let j = 0; j < 13; j++) {
                            if (sys[j] == 2) {
                                for (let k = 0; k < 16; k++) {
                                    if (AIarray[k] % 13 == j) {
                                        tail[index] = AIarray[k];
                                        index += 1;
                                        AIarray[k] = -1;
                                    }
                                }
                                break;
                            }
                        }
                    }
                }
                if (test2 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    now = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 3) {
                            now[3]++;
                        }
                        if (sys[j] == 2) {
                            now[4]++;
                        }
                    }
                    index = 0;
                    if (now[3] > 0 && now[4] > 0) {
                        test2 = 1;
                        trick[1] = 8;
                        for (let j = 0; j < 13; j++) {
                            if (sys[j] == 3) {
                                for (let k = 0; k < 16; k++) {
                                    if (AIarray[k] % 13 == j) {
                                        mid[index] = AIarray[k];
                                        index += 1;
                                        AIarray[k] = -1;
                                    }
                                }
                                break;
                            }
                        }
                        for (let j = 0; j < 13; j++) {
                            if (sys[j] == 2) {
                                for (let k = 0; k < 16; k++) {
                                    if (AIarray[k] % 13 == j) {
                                        mid[index] = AIarray[k];
                                        index += 1;
                                        AIarray[k] = -1;
                                    }
                                }
                                break;
                            }
                        }
                    }
                }
                //同花
                if (test3 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        if (AIarray[j] > 0 && AIarray[j] < 14) {
                            sys[0]++;
                        }
                        if (AIarray[j] > 13 && AIarray[j] < 27) {
                            sys[1]++;
                        }
                        if (AIarray[j] > 26 && AIarray[j] < 40) {
                            sys[2]++;
                        }
                        if (AIarray[j] > 39) {
                            sys[3]++;
                        }
                    }
                    for (let j = 0; j < 4; j++) {
                        if (sys[j] >= 5) {;
                            test3 = 1;
                            trick[2] = 6;
                            for (let k = 0; k < 16; k++) {
                                if (j == 3 && AIarray[k] > 39) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    if (index == 5) break;
                                }
                                else if (AIarray[k] < (14 + 13 * j) && AIarray[k] > (13 * j)) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    if (index == 5) break;
                                }
                            }
                            break;
                        }
                    }
                }
                if (test2 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        if (AIarray[j] > 0 && AIarray[j] < 14) {
                            sys[0]++;
                        }
                        if (AIarray[j] > 13 && AIarray[j] < 27) {
                            sys[1]++;
                        }
                        if (AIarray[j] > 26 && AIarray[j] < 40) {
                            sys[2]++;
                        }
                        if (AIarray[j] > 39){
                            sys[3]++;
                        }
                    }
                    for (let j = 0; j < 4; j++) {
                        if (sys[j] >= 5) {                          
                            test2 = 1;
                            trick[1] = 6;
                            for (let k = 0; k < 16; k++) {
                                if (j == 3 && AIarray[k] > 39) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    if (index == 5) break;
                                }
                                else if (AIarray[k] < (14 + 13 * j) && AIarray[k] > (13 * j)) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    if (index == 5) break;
                                }
                            }
                            break;
                        }
                    }
                }
                //順子
                if (test3 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        gold = AIarray[j] % 13;
                        if (gold != 0) {
                            sys[gold - 1] += 1;
                        }
                        else {
                            sys[12] += 1;
                        }
                    }
                    for (let j = 0; j < 9; j++) {
                        if (sys[j] > 0 && sys[j + 1] > 0 && sys[j + 2] > 0 && sys[j + 3] > 0 && sys[j + 4] > 0) {
                            test3 = 1;
                            trick[2] = 5;
                            gold = j + 1;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 2;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 3;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 4;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 5;
                            if (gold == 13) gold = 0;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            break;
                        }
                    }
                }
                if (test2 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        gold = AIarray[j] % 13;
                        if (gold != 0) {
                            sys[gold - 1] += 1;
                        }
                        else {
                            sys[12] += 1;
                        }
                    }
                    for (let j = 0; j < 9; j++) {
                        if (sys[j] > 0 && sys[j + 1] > 0 && sys[j + 2] > 0 && sys[j + 3] > 0 && sys[j + 4] > 0) {
                            test2 = 1;
                            trick[1] = 5;
                            gold = j + 1;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 2;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 3;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 4;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            gold = j + 5;
                            if (gold == 13) gold = 0;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == gold) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                    break;
                                }
                            }
                            break;
                        }
                    }
                }
                //三條
                if (test3 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 3) {
                            trick[2] = 3;
                            test3 = -2;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == j) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                }
                            }
                            break;
                        }
                    }
                }
                if (test2 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 3) {                           
                            trick[1] = 3;
                            test2 = -2;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == j) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                }
                            }
                            break;
                        }
                    }
                }
                if (test1 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 3) {
                            test1 = 1;
                            trick[0] = 3;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == j) {
                                    head[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                }
                            }
                            break;
                        }
                    }
                }
                //一對
                if (test3 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 2) {
                            test3 = -3;
                            trick[2] = 1;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == j) {
                                    tail[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                }
                            }
                            break;
                        }
                    }
                }
                if (test2 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 2) {                            
                            trick[1] = 1;
                            test2 = -3;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == j) {
                                    mid[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                }
                            }
                            break;
                        }
                    }
                }
                if (test1 == 0) {
                    sys = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
                    index = 0;
                    for (let j = 0; j < 16; j++) {
                        sys[AIarray[j] % 13] += 1;
                    }
                    for (let j = 0; j < 13; j++) {
                        if (sys[j] == 2) {
                            test1 = -1;
                            trick[0] = 1;
                            for (let k = 0; k < 16; k++) {
                                if (AIarray[k] % 13 == j) {
                                    head[index] = AIarray[k];
                                    index += 1;
                                    AIarray[k] = -1;
                                }
                            }
                            break;
                        }
                    }
                }
            }
            //排墩可能有缺牌下面補牌(含烏龍)
            AIarray.sort(function (a, b) {//剩下的牌由大排到小
                return b - a;
            })
            gold = 0;
            if (test3 == 0) {
                tail[0] = AIarray[gold];
                gold += 1;
                tail[1] = AIarray[gold];
                gold += 1;
                tail[2] = AIarray[gold];
                gold += 1;
                tail[3] = AIarray[gold];
                gold += 1;
                tail[4] = AIarray[gold];
                gold += 1;
            }
            else
                if (test3 == -3) {
                    tail[2] = AIarray[gold];
                    gold += 1;
                    tail[3] = AIarray[gold];
                    gold += 1;
                    tail[4] = AIarray[gold];
                    gold += 1;
                }
                else
                    if (test3 == -2) {
                        tail[3] = AIarray[gold];
                        gold += 1;
                        tail[4] = AIarray[gold];
                        gold += 1;
                    }
                    else
                        if (test3 == -1) {
                            tail[4] = AIarray[gold];
                            gold += 1;
                        }
            if (test2 == 0) {
                mid[0] = AIarray[gold];
                gold += 1;
                mid[1] = AIarray[gold];
                gold += 1;
                mid[2] = AIarray[gold];
                gold += 1;
                mid[3] = AIarray[gold];
                gold += 1;
                mid[4] = AIarray[gold];
                gold += 1;
            }
            else
                if (test2 == -3) {
                    mid[2] = AIarray[gold];
                    gold += 1;
                    mid[3] = AIarray[gold];
                    gold += 1;
                    mid[4] = AIarray[gold];
                    gold += 1;
                }
                else
                    if (test2 == -2) {
                        mid[3] = AIarray[gold];
                        gold += 1;
                        mid[4] = AIarray[gold];
                        gold += 1;
                    }
                    else
                        if (test2 == -1) {
                            mid[4] = AIarray[gold];
                            gold += 1;
                        }
            if (test1 == 0) {
                head[0] = AIarray[gold];
                gold += 1;
                head[1] = AIarray[gold];
                gold += 1;
                head[2] = AIarray[gold];
                gold += 1;
            }
            else if (test1 == -1) {
                head[2] = AIarray[gold];
                gold += 1;
            }
            if (bcd == 1) {
                B1 = head;
                B2 = mid;
                B3 = tail;
                trickB = trick;
            }
            if (bcd == 2) {
                C1 = head;
                C2 = mid;
                C3 = tail;
                trickC = trick;
            }
            if (bcd == 3) {
                D1 = head;
                D2 = mid;
                D3 = tail;
                trickD = trick;
            }
        }
        document.addEventListener("load", getdata(), false);//載入完網頁後讀數據
    </script>
</body>
</html>